<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>

	<!--
			Page
	-->
	<record id="sale_advertising_page_tree" model="ir.ui.view" >
		<field name="name">sale.advertising.page.tree</field>
		<field name="type">tree</field>
		<field name="model">sale.advertising.page</field>
		<field name="arch" type="xml">
			<tree string="Advertising Pages" editable="top">
					<field name="name"/>
			</tree>
		</field>
	</record>
	<record model="ir.actions.act_window" id="action_sale_advertising_page">
		<field name="name">Advertising Page</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">sale.advertising.page</field>
		<field name="view_mode">tree</field>
		<field name="view_id" ref="sale_advertising_page_tree"/>
	</record>



	<!--
			Available
	 -->
	<record model="ir.ui.view" id="sale_advertising_available_form">
		<field name="name">sale.advertising.available.form</field>
		<field name="type">form</field>
		<field name="model">sale.advertising.available</field>
		<field name="arch" type="xml">
			<form string="Page Availability" >
				<sheet>
					<group>
						<field name="adv_issue_id"/>
						<field name="issue_date" />
						<field name="name"/>
						<field name="page_id" />
						<field name="order_line_id" readonly="1"/>
						<field name="available_qty"/>
					</group>
				</sheet>
			</form>
		</field>
	</record>
	<record id="sale_advertising_available_tree" model="ir.ui.view" >
		<field name="name">sale.advertising.available.tree</field>
		<field name="type">tree</field>
		<field name="model">sale.advertising.available</field>
		<field name="arch" type="xml">
			<tree name="page_available" string="Page Availability">
				<field name="adv_issue_id"/>
				<field name="issue_date" />
				<field name="name" />
				<field name="page_id" />
				<field name="order_line_id" />
				<field name="available_qty" />
			</tree>
		</field>
	</record>

	<record id="view_advertising_available_filter" model="ir.ui.view">
		<field name="name">sale.advertising.available.filter</field>
		<field name="model">sale.advertising.available</field>
		<field name="arch" type="xml">
			<search string="Search Advertising Availability">
				<filter name="opboekingen" string="Opboekingen" domain="[('available_qty','&gt;=', 0)]"/>
				<filter name="afboekingen" string="Afboekingen" domain="[('available_qty','&lt;', 0)]"/>
				<separator/>
				<field name="name"/>
				<field name="adv_issue_id" />
				<field name="page_id"/>
				<group expand="0" string="Group By">
					<filter name="issues" string="Issues" domain="[]" context="{'group_by':'adv_issue_id'}"/>
					<filter name="page" string="Page" domain="[]" context="{'group_by':'page_id'}"/>
				</group>
			</search>
		</field>
	</record>

	<record model="ir.actions.act_window" id="action_sale_advertising_available">
		<field name="name">Advertising Page Availability</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">sale.advertising.available</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="sale_advertising_available_tree"/>
	</record>



	<!--
			Issue (form)
	-->
	<record model="ir.ui.view" id="sale_advertising_issue_form">
		<field name="name">sale.advertising.issue.form</field>
		<field name="type">form</field>
		<field name="model">sale.advertising.issue</field>
		<field name="arch" type="xml">
			<form string="Advertising issue" >
				<header>
					<field name="state" widget="statusbar" statusbar_visible="open,close" clickable="True"/>
				</header>

				<sheet>
					<div class="oe_button_box" name="button_box">
						<button name="action_open_issue" type="object" class="oe_stat_button" icon="fa-tasks"
								attrs="{'invisible' : [('parent_id', '!=', False)]}" context="{'default_parent_id': active_id}" >
							<field string="Issue(s)" name="issue_count" widget="statinfo"/>
						</button>
						<button name="toggle_active" type="object" groups="base.group_user" class="oe_stat_button" icon="fa-archive">
							<field name="active" invisible="1" widget="boolean_button" options='{"terminology": "archive"}'/>
						</button>
					</div>
					<widget name="web_ribbon" title="Closed"
						bg_color="bg-danger" attrs="{'invisible': [('state', '!=', 'close')]}" />

					<div class="oe_title">
						<label for="name" class="oe_edit_only" string="Issue / Title"/>
						<h1><field name="name" placeholder="Describe the name of Title / Issue..."/></h1>
					</div>
					<group col="4" colspan="4" >
						<field name="code" string="Code"/>
						<field name="medium_domain" invisible="1"/>
						<field name="parent_id" domain="[('parent_id','=', False)]"/>
						<field name="price_edit" string="Price Editable"
							   attrs="{'invisible':[('parent_id','=',True)]}"/>
						<field name="medium" widget="many2many_tags"
							   options="{'no_create': True, 'no_create_edit': True}"/>
						<field name="product_attribute_value_id"
							   attrs="{'required':[('parent_id','=',False),
							   ('medium','in', (%(sale_advertising_order.newspaper_advertising_category)d,
												%(sale_advertising_order.magazine_advertising_category)d))]}"/>
						<field name="analytic_account_id"/>
						<field name="issue_date"/>
						<field name="issue_week_number"/>
						<field name="deadline"/>
						<field name="default_note" />
						<field name="active" widget="boolean_toggle"/>
					</group>
						<field name="available_ids" string="Availability" >
							 <tree string="Availability" editable="top">
								<field name="name"/>
								<field name="page_id"/>
								<field name="order_line_id"/>
								<field name="available_qty"/>
							 </tree>
						</field>
					<group class="oe_subtotal_footer oe_right">
						<field name="amount_total" class="oe_subtotal_footer_separator"/>
					</group>
				</sheet>
			</form>
		</field>
	</record>

	<!--
			Issue (list)
	-->
	<record id="sale_advertising_issue_tree" model="ir.ui.view" >
		<field name="name">sale.advertising.issue.tree</field>
		<field name="type">tree</field>
		<field name="model">sale.advertising.issue</field>
		<field name="arch" type="xml">
			<tree string="Advertising issue" decoration-info="not parent_id" >
				<field name="name" decoration-bf="not parent_id"/>
				<field name="code" />
				<field name="parent_id"/>
				<field name="product_attribute_value_id" optional="hide"/>
				<field name="analytic_account_id" optional="hide"/>
				<field name="issue_date"/>
				<field name="issue_week_number" optional="hide"/>
				<field name="week_number_even" optional="hide"/>
				<field name="deadline"/>
				<field name="medium"/>
				<field name="default_note"/>
				<field name="state" string="Status" decoration-success="state == 'open'" decoration-muted="state == 'cancel'" widget="badge"/>
			</tree>
		</field>
	</record>

	<!--
			Titles (tree)
	-->
	<record id="advertising_issue_titles_tree" model="ir.ui.view" >
		<field name="name">sale.advertising.issue.tree</field>
		<field name="type">tree</field>
		<field name="model">sale.advertising.issue</field>
		<field name="arch" type="xml">
			<tree string="Advertising issue" default_order='name asc'>
				<field name="name"/>
				<field name="code"/>
				<field name="product_attribute_value_id"/>
				<field name="analytic_account_id"/>
				<field name="medium"/>
				<field name="default_note"/>
				<field name="state" decoration-success="state == 'open'" decoration-muted="state == 'cancel'" widget="badge"/>
			</tree>
		</field>
	</record>

	<!--
			Advertising Issue (Issue)
	-->
	<record model="ir.actions.act_window" id="action_sale_advertising_issue">
		<field name="name">Advertising Issue</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">sale.advertising.issue</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="sale_advertising_issue_tree"/>
		<field name="domain">[('parent_id','!=', False)]</field>
	</record>

	<!--
			Advertising Issue (Title)
	-->
	<record model="ir.actions.act_window" id="action_sale_advertising_issue_title">
		<field name="name">Advertising Title</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">sale.advertising.issue</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="advertising_issue_titles_tree"/>
		<field name="domain">[('parent_id','=', False)]</field>
	</record>


</data>
</odoo>