<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>

        <!--
            Sale Order (SAO)
        -->
        <record id="view_order_form_advertising" model="ir.ui.view">
            <field name="name">sale.order.form.advertising</field>
            <field name="model">sale.order</field>
			<field name="priority">20</field>
            <field name="arch" type="xml">
                <form string="Sales Order" class="o_sale_order">
                <header>
                    <button name="%(sale.action_view_sale_advance_payment_inv)d"
                            string="Create Invoice"
                            type="action" class="btn-primary"
                            attrs="{'invisible': ['|', ('state', '!=', 'sale'),
                                                  '|', ('state', '=', 'sale'),  ('invoice_status', '!=', 'to invoice'),
                                                  '|',('invoice_status', '!=', 'to invoice'), ('state', '!=', 'sale')]}"
                            groups="sale_advertising_order.group_ads_traffic_user"/>

                    <button name="%(sale.action_view_sale_advance_payment_inv)d"
                            string="Create Invoice"
                            type="action" context="{'default_advance_payment_method': 'percentage'}"
                            attrs="{'invisible': ['|',('invoice_status', '!=', 'no'), ('state', '!=', 'sale')]}"
                            groups="sale_advertising_order.group_ads_traffic_user"/>

					<button name="action_submit" string="Submit for Approval" states="draft" type="object"
                            class="oe_highlight" groups="sale_advertising_order.group_ads_sales_user"/>

					<button name="action_approve1" string="Approve Quotation"
                            states="submitted" type="object" class="oe_highlight"
							groups="sale_advertising_order.group_ads_sales_manager"/>

					<button name="action_refuse" string="Refuse"
                            type="object" states="submitted"
							groups="sale_advertising_order.group_ads_sales_manager"/>

                    <button name="action_quotation_send" string="Send by Email" type="object" states="draft,approved1,sent,sale,done"
                            class="btn-primary"	groups="sale_advertising_order.group_ads_sales_user"/>

                    <button name="action_confirm" string="Confirm Sale" states="approved1,sent"
                            class="btn-primary o_sale_confirm"
                            groups="sale_advertising_order.group_ads_traffic_user" type="object" />

                    <button name="action_cancel"  id="cancel" type="object" string="Cancel"
                                  states="draft,sent"
                                  groups="sale_advertising_order.group_ads_sales_user"/>
                    <button name="action_cancel" id="cancel1" type="object" string="Cancel"
                                  states="submitted,approved1"
                                  groups="sale_advertising_order.group_ads_sales_manager"/>
                    <button name="action_cancel" id="cancel2" type="object" string="Cancel"
                             states="sale"
                             groups="sale_advertising_order.group_ads_traffic_user"/>

                    <button name="action_draft" states="cancel" type="object" string="Set to Quotation"/>
                    <button name="action_done" type="object" string="Lock" states="sale" groups="sale_advertising_order.group_ads_traffic_user"/>
                            help="If the sale is locked, you can not modify it anymore. However, you will still be able to invoice or deliver."/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,sent,submitted,approved1,sale,done"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_view_invoice" groups="sale_advertising_order.group_ads_traffic_user"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-pencil-square-o"
                            attrs="{'invisible': [('invoice_count', '=', 0)]}">
                            <field name="invoice_count" widget="statinfo" string="Invoices"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <h1>
                            <field name="name" readonly="1"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="pub_cust_domain" invisible="1"/>
                            <field name="published_customer"
                                   context="{'tree_view_ref': 'sale_advertising_order.view_partner_tree_nsm_crm', 'res_partner_search_mode': 'customer'}"
                                   domain="pub_cust_domain"
                                   attrs="{'readonly':['|',('state','in', ['cancel','done']),('state','in', ['sale']),('invoice_status','not in','not invoiced')]}"
                                   required="True" options="{'no_create':True}"/>
                            <field name="partner_id" string="Payer"
                                   domain="[('is_customer', '=', True), ('parent_id','=', False)]"
                                   context="{'search_default_customer':1, 'show_address': 1, 'res_partner_search_mode': 'customer'}" options='{"always_reload": True, "no_create_edit": True}'
                                   attrs="{'readonly':['|',('state','in', ['cancel','done']),('state','in', ['sale']),('invoice_status','not in','not invoiced')]}"
                            />
                            <field name="partner_invoice_id" string="Payer Invoice Address"
                                   context="{'default_type':'invoice', 'show_address': 1, 'show_email':1, 'res_partner_search_mode': 'customer'}" options='{"always_reload": True, "no_create_edit": True}' domain="[('id','child_of',partner_id)]"
                                   attrs="{'readonly':['|',('state','in', ['cancel','done']),('state','in', ['sale']),('invoice_status','not in','not invoiced')]}"
                                   groups="sale.group_delivery_invoice_address"/>
                            <field name="customer_contact" required="False" context="{'default_parent_id': partner_id, 'show_email': 1, 'res_partner_search_mode': 'customer'}"
                                   domain="[('is_company', '=', False),('parent_id', '=', partner_id),('type', '=', 'contact')]"
                                   options='{"always_reload": True, "no_create_edit": True}'
                                   attrs="{'readonly':[('state','in', ['cancel','done'])]}"/>
                            <field name="advertising_agency"
                                   domain="[('is_ad_agency','=', True),('is_customer', '=', True), ('is_company','=', True)]"
                                   attrs="{'readonly':['|',('state','in', ['cancel','done']),('state','in', ['sale']),('invoice_status','not in','not invoiced')]}"
                                   context="{'res_partner_search_mode': 'customer'}"/>

                            <field name="agency_is_publish" />
                            <field name="opportunity_subject" required="True" string="Subject"/>
                        </group>
                        <group name="order_details">
                            <field name="validity_date" attrs="{'invisible': [('state', 'in', ['sale', 'done'])]}"/>
                            <div class="o_td_label" groups="base.group_no_one" attrs="{'invisible': [('state', 'in', ['sale', 'done', 'cancel'])]}">
                                <label for="date_order" string="Quotation Date"/>
                            </div>
                            <field name="date_order" nolabel="1" groups="base.group_no_one" attrs="{'invisible': [('state', 'in', ['sale', 'done', 'cancel'])]}"/>
                            <div class="o_td_label" attrs="{'invisible': [('state', 'not in', ['sale', 'done'])]}">
                                <label for="date_order" string="Order Date"/>
                            </div>
                            <field name="date_order" attrs="{'required': [('state', 'in', ['sale', 'done'])], 'invisible': [('state', 'not in', ['sale', 'done'])]}" nolabel="1"/>

                            <field name="client_order_ref" string="Client Order Reference"/>
						    <field name="traffic_employee" invisible="1" string="Traffic Employee" groups="sale_advertising_order.group_ads_traffic_user"/>
                            <field name="traffic_comments" invisible="1" string="Traffic Comments"/>
                            <field name="pricelist_id" groups="product.group_sale_pricelist"/>
                            <field name="currency_id" invisible="1"/>
                            <field name="payment_term_id" options="{'no_create': True}"/>
                            <field name="payment_mode_id" domain="[('payment_type', '=', 'inbound')]" widget="selection"/>
                            <field name="operating_unit_id" widget="selection" groups="operating_unit.group_multi_operating_unit"/>
                            <field name="display_discount_to_customer"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Order Lines" name="order_line">
                            <field name="order_line" mode="tree,kanban"
                                   attrs="{'readonly': [('state', 'in', ['sale','done','cancel'])]}"
                                   context="{'customer_contact': customer_contact}">
                                <form string="Sales Order Lines">
                                    <group>
                                        <group>
                                            <field name="product_uom_category_id" invisible="1"/>
                                            <field name="medium" required="True"
                                                   domain="[('parent_id','=', %(sale_advertising_order.advertising_category)d)]"
                                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"/>
                                            <field name="ad_class" required="True"
                                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"/>
                                            <field name="title" string="Title" invisible="1"/>
                                            <field name="title_ids" string="Title(s)"
                                                   widget="many2many_tags"
                                                   domain="[('parent_id','=', False), ('medium','child_of', medium)]"
                                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"
                                                   context="{'active_test': False, 'search_view_ref':'sale_advertising_order.view_advertising_issue_filter',
                                                             'tree_view_ref':'sale_advertising_order.advertising_issue_titles_tree' }">
                                            </field>
                                            <field name="from_date"
                                                   attrs="{'invisible':[('date_type','!=','validity')], 'required':[('date_type','=','validity')]}"/>
                                            <field name="to_date"
                                                   attrs="{'invisible':[('date_type','!=','validity')], 'required':[('date_type','=','validity')]}"/>
                                            <field name="deadline_offset" invisible="1" />
                                            <field name="deadline_passed" invisible="1" />
                                            <field name="deadline" invisible="0" />
                                            <field name="adv_issue_ids" string="Advertising Issue(s)"
                                                   widget="many2many_tags"
                                                   attrs="{'readonly': [('issue_product_ids','!=', [])]}"
                                                   domain="[('parent_id','in', title_ids),
                                                            '|','|',('deadline','&gt;=', deadline_offset),('deadline','=', False),
                                                                    ('issue_date','&lt;=', datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S'))]"
                                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"
                                                   context="{'active_test': False, 'search_view_ref':'sale_advertising_order.view_advertising_issue_filter',
                                                             'tree_view_ref':'sale_advertising_order.advertising_issue_ids_tree' }">
                                            </field>

                                            <field name="issue_date" readonly="1" force_save="1"
                                                   attrs="{'invisible': [('multi_line', '=', True)]}"/>
                                            <field name="domain4prod_ids" invisible="1"/>
                                            <field name="product_template_id" domain="[('id','in', domain4prod_ids)]"
                                                   context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'company_id': parent.company_id}"
                                                   attrs="{'readonly': ['|', ('qty_invoiced', '&gt;', 0), ('deadline_passed','=', True)]}"
                                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}" required="1"/>
                                            <field name="product_id" invisible="1" groups="base.group_no_one"
                                                   context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'company_id': parent.company_id}"
                                                   attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"
                                                   domain="['|','&amp;',('categ_id','=', ad_class),('product_template_attribute_value_ids','=', False),('product_tmpl_id','=', product_template_id)]"
                                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"/>
                                            <field name="invoice_status" invisible="1"/>
                                            <field name="qty_to_invoice" invisible="1"/>
                                            <field name="qty_delivered_manual" invisible="1"/>
                                            <field name="nett_nett" />
                                            <field name="multi_line" groups="base.group_no_one"/>
                                            <field name="multi_line_number" readonly="True" groups="base.group_no_one"/>
                                            <field name="adv_issue" invisible="1"/>

                                        </group>
                                        <group name="price_section">
                                            <label for="customer_lead" invisible="1" groups="base.group_no_one"/>
                                            <div groups="base.group_no_one" invisible="1">
                                                <field name="customer_lead" class="oe_inline" groups="base.group_no_one"/> days
                                            </div>
                                            <field name="multi_line" invisible="0" groups="base.group_no_one"/>
                                            <field name="multi_line_number" invisible="0" readonly="True" groups="base.group_no_one"/>

                                            <label for="product_uom_qty" string="Ordered Quantity"/>
                                            <div>
                                                <field name="product_uom_qty" class="oe_inline"
                                                       context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id,
                                                                    'uom':product_uom, 'uom_qty_change':True, 'company_id': parent.company_id}"
                                                       attrs="{'readonly': [('deadline_passed','=', True)]}"/>
                                                <field name="product_uom" groups="uom.group_uom" class="oe_inline oe_no_button"
                                                       readonly="True"/>
                                            </div>
                                            <label for="qty_delivered" string="Delivered Quantity" invisible="context.get('hide_sale')" groups="base.group_no_one"/>
                                            <div invisible="context.get('hide_sale')" groups="base.group_no_one">
                                                <field name="qty_delivered" attrs="{'readonly': [('qty_delivered_manual', '=', False)]}"/>
                                            </div>
                                            <label for="qty_invoiced" string="Invoiced Quantity" invisible="context.get('hide_sale')" groups="base.group_no_one"/>
                                            <div invisible="context.get('hide_sale')" groups="base.group_no_one">
                                                <field name="qty_invoiced" invisible="context.get('hide_sale')"/>
                                            </div>
                                            <field name="adv_issue" options="{'no_open': True,'no_create': True, 'no_create_edit': True}"
                                                   domain="[('parent_id','!=', False),
                                                            ('parent_id','=', title),
                                                            '|','|',('deadline','&gt;=', deadline_offset),
                                                                    ('deadline','=', False),
                                                                    ('issue_date','&lt;=', datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')),]"
                                                   invisible="1"/>

                                            <field name="tax_id" widget="many2many_tags"
                                                domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                                                groups="sale_advertising_order.group_ads_traffic_user"
                                                attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"/>
                                            <field name="price_edit" invisible="1"/>

                                            <field name="price_unit" readonly="0" attrs="{'invisible': ['|',('multi_line','=', True),('price_edit','!=', True)]}"
                                                    widget="monetary" options="{'currency_field': 'currency_id'}" />
                                            <field name="price_unit_dummy" readonly="1" attrs="{'invisible': ['|',('multi_line','=', True),('price_edit','=', True)]}"
                                                    widget="monetary" options="{'currency_field': 'currency_id'}" />
                                            <field name="comb_list_price" readonly="True" attrs="{'invisible': [('multi_line','=', False)]}"
                                                    widget="monetary" options="{'currency_field': 'currency_id'}" />
                                            <field name="actual_unit_price" attrs="{'invisible': [('multi_line','=', True)]}" widget="monetary"
                                                    options="{'currency_field': 'currency_id'}" />
<!--                                            <field name="price_unit" readonly="0" attrs="{'invisible': ['|',('multi_line','=', True),('price_edit','!=', True)]}"/>-->
<!--                                            <field name="price_unit_dummy" readonly="1" attrs="{'invisible': ['|',('multi_line','=', True),('price_edit','=', True)]}"/>-->
<!--                                            <field name="comb_list_price" readonly="True" attrs="{'invisible': [('multi_line','=', False)]}"/>-->
<!--&lt;!&ndash;                                            <field name="color_surcharge" /> deprecated&ndash;&gt;-->
<!--&lt;!&ndash;                                            <field name="color_surcharge_amount" attrs="{'invisible': [('color_surcharge','=', False)]}"/> deprecated&ndash;&gt;-->
<!--                                            <field name="actual_unit_price" attrs="{'invisible': [('multi_line','=', True)]}"/>-->

                                            <label for="computed_discount" groups="product.group_discount_per_so_line"/>
                                                <div name="computed_discount" groups="product.group_discount_per_so_line">
                                                    <field name="computed_discount" class="oe_inline"/> %%
                                                </div>
                                            <field name="discount_reason_id" attrs="{'invisible': [('computed_discount','=', 0.0)],'required': [('computed_discount','!=', 0.0)]}"/>
                                            <field name="subtotal_before_agency_disc" readonly="False"/>
                                            <label for="discount" string="Agency Commission" groups="product.group_discount_per_so_line"/>
                                                <div name="discount" string="Agency Discount (%)" groups="product.group_discount_per_so_line">
                                                    <field name="discount" invisible="1"/>
                                                    <field name="discount_dummy" class="oe_inline"/> %%
                                                </div>
                                            <field name="price_subtotal" readonly="True" />
                                            <field name="date_type" invisible="True"/>
                                            <label for="customer_lead" groups="base.group_no_one"/>
                                            <div groups="base.group_no_one">
                                                <field name="customer_lead" class="oe_inline" groups="base.group_no_one"/> days
                                            </div>
                                        </group>
                                    </group>
                                    <group >
                                        <group>
                                            <separator string="Material Remarks" colspan="2"/>
                                            <field name="layout_remark" colspan="2" nolabel="1"/>
                                        </group>
                                        <group>
                                            <separator string="Description" colspan="2"/>
                                            <field name="name" colspan="2" nolabel="1"/>
                                        </group>
                                    </group>
                                    <group string="Proof Numbers">
                                        <group>
                                            <field name="proof_number_adv_customer" string="Proof Number Advertiser"
                                                   domain="[('is_customer', '=', True)]"
                                                   context="{'default_parent_id': 'parent.partner_id', 'show_email': 1}" options="{'no_create_edit': True}" widget="many2many_tags"/>
                                            <field name="proof_number_amt_adv_customer" attrs="{'invisible':[('proof_number_amt_adv_customer','=', 0)],'required':[('proof_number_adv_customer','!=', False)]}" string="Proof Number Amount Advertiser"/>
                                        </group>
                                        <group>
                                            <!--<field name="proof_number_payer" />-->
                                            <field name="proof_number_payer_id" domain="[('type', '=', 'contact'),('id','child_of',parent.partner_id)]" attrs="{'required': [('proof_number_amt_payer', '>', 0)]}"
                                                   context="{'default_parent_id': 'order_partner_id', 'show_address': 1}" options="{'no_create_edit': True, 'always_reload': True}"
                                                    string="Proof Number Payer"/>
                                            <field name="proof_number_amt_payer" attrs="{'invisible':[('proof_number_payer_id','=', False)],'required':[('proof_number_payer_id','!=', False)]}"/>
                                        </group>
                                    </group>
                                    <group string="Adv.Issues with Products and Prices"
                                            attrs="{'invisible':[('issue_product_ids','=',[])]}">
                                        <field name="issue_product_ids" nolabel="1"
                                               attrs="{'invisible':[('issue_product_ids','=',[])]}"
                                               options="{'no_create': True, 'no_create_edit': True}" readonly="0">
                                            <tree string="Issues Products Prices" editable="bottom">
                                                <field name="adv_issue_id" string="Issue" force_save="1" domain="[('parent_id','in', parent.title_ids)]"/>
                                                <field name="product_attribute_value_id" force_save="1"  invisible="True" />
                                                <field name="product_id" force_save="1"  string="Product" domain="[('product_tmpl_id','=', parent.product_template_id), ('product_template_attribute_value_ids','in', product_attribute_value_id)]"/>
                                                <field name="price_edit" force_save="1"  string="Price editable" invisible="1"/>
                                                <field name="price_unit" force_save="1"  string="Unit Price"
                                                       attrs="{'readonly': [('price_edit','!=', True)]}"/>
                                                <field name="qty" force_save="1"  string="Qty"/>
                                                <field name="price" force_save="1"  string="Price"/>
                                                <field name="page_reference" string="Page Pref." />
                                                <field name="ad_number" string="External Ref." />
                                                <field name="url_to_material" string="URL Ad Material" />
                                            </tree>
                                        </field>
                                    </group>
                                    <group>
                                        <group name="ad_refs" string="Page">
                                            <field name="booklet_surface_area" invisible="0"/>
                                            <field name="page_class_domain" invisible="1"/>
                                            <label for="analytic_tag_ids" string="Page Category"/>
                                            <div>
                                                <field name="analytic_tag_ids"
                                                       string="Page Category"
                                                       widget="many2many_tags"
                                                       domain="page_class_domain"
                                                       attrs="{'readonly': [('deadline_passed','=', True)]}"/>
                                            </div>
                                            <field name="ad_number"/>
                                            <field name="page_reference"/>
                                            <field name="url_to_material" />
                                        </group>
                                        <group>
                                            <separator string="Migration Remarks" colspan="2"/>
                                            <field name="mig_remark" colspan="2" nolabel="1"/>
                                        </group>
                                    </group>
                                    <div groups="base.group_no_one">
                                        <label for="invoice_lines"/>
                                        <field name="invoice_lines"/>
                                    </div>
                                    <field name="state" invisible="1"/>
                                </form>

                                <tree string="Sales Order Lines"  decoration-info="invoice_status=='to invoice'" default_order='issue_date'>
                                    <field name="sequence" widget="handle"/>
                                    <field name="product_uom_category_id" invisible="1"/>
                                    <field name="id" optional="hide"/>
                                    <field name="medium" invisible="1" />
                                    <field name="deadline_offset" invisible="1" />
                                    <field name="title_ids" invisible="1" domain="[('parent_id','=', False), ('medium','child_of', medium)]" />
                                    <field name="adv_issue_ids" widget="many2many_tags" domain="[('parent_id','in', title_ids), '|','|',('deadline','&gt;=', deadline_offset),('deadline','=', False),('issue_date','&lt;=', datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S'))]"/>
                                    <field name="issue_date" />
                                    <field name="from_date" optional="show"/>
                                    <field name="to_date" optional="show"/>
                                    <field name="deadline"/>
                                    <field name="ad_class" groups="base.group_no_one" optional="hide"/>
                                    <field name="product_id"
                                        attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"
                                        context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'company_id': parent.company_id}"
                                       />
                                    <field name="name" groups="base.group_no_one" optional="hide"/>
                                    <field name="ad_number" optional="show"/>
                                    <field name="page_reference" optional="show"/>
                                    <field name="qty_invoiced"
                                            invisible="context.get('hide_sale')" groups="base.group_no_one" optional="hide"/>
                                    <field name="qty_to_invoice" invisible="1"/>
                                    <field name="analytic_tag_ids" groups="analytic.group_analytic_accounting"
                                           string="Page Category" widget="many2many_tags" optional="hide"/>
                                    <field name="price_unit" readonly="1" optional="hide"/>
                                    <field name="actual_unit_price" widget="monetary"/>
                                    <field name="product_uom_qty"/>
                                    <field name="product_uom"
                                            attrs="{'readonly': [('state', 'in', ('sale','done', 'cancel'))]}"
                                            context="{'company_id': parent.company_id}"
                                            groups="uom.group_uom" options='{"no_open": True}'/>
                                    <field name="comb_list_price" widget="monetary" optional="hide"/>
                                    <field name="computed_discount" />
                                    <field name="subtotal_before_agency_disc" widget="monetary" optional="hide"/>
                                    <field name="discount_dummy" optional="hide"/>
                                    <field name="tax_id" widget="many2many_tags" domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                                            attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"
                                            groups="account.group_account_invoice, sale_advertising_order.group_ads_traffic_user"/>
                                    <field name="discount" groups="product.group_discount_per_so_line" invisible="1"/>
                                    <field name="price_subtotal" widget="monetary" groups="account.group_show_line_subtotals_tax_excluded"/>
                                    <field name="price_total" widget="monetary" groups="account.group_show_line_subtotals_tax_included"/>
                                    <field name="qty_delivered_manual" invisible="1"/>
                                    <!--<field name="procurement_ids" invisible="1"/>-->
                                    <field name="state" invisible="1"/>
                                    <field name="invoice_status" optional="hide"/>
                                    <field name="customer_lead" invisible="1"/>
                                    <field name="currency_id" invisible="1"/>
                                    <button name="cancel_line" icon="fa-cog" string="Cancel"  type="object"
                                            attrs="{'invisible': [('invoice_status','!=', 'to invoice')]}"
                                            confirm="Are you sure you want to cancel this line?"
                                            groups="sale_advertising_order.group_ads_traffic_user"/>
                                </tree>
                                <kanban class="o_kanban_mobile">
                                    <field name="product_id"/>
                                    <field name="product_uom_qty"/>
                                    <field name="product_uom" groups="uom.group_uom" invisible="1"/>
                                    <field name="price_subtotal"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <strong><span><t t-esc="record.product_id.value"/></span></strong>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-8 text-muted">
                                                        <span><t t-esc="record.product_uom_qty.value"/> <t t-esc="record.product_uom.value"/></span>
                                                    </div>
                                                    <div class="col-xs-4 text-muted">
                                                        <span class="pull-right text-right"><t t-esc="record.price_subtotal.value"/></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                            </field>
                            <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                                <field name="amount_untaxed" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                                <field name="amount_tax" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                                <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                    <label for="amount_total" />
                                </div>
                                <field name="amount_total" nolabel="1" class="oe_subtotal_footer_separator" widget='monetary' options="{'currency_field': 'currency_id'}"/>

                            </group>
                            <field name="note" class="oe_inline" placeholder="Setup default terms and conditions in your company settings."/>
                            <div class="oe_clear"/>
                        </page>
                        <page string="Other Information">
                            <group>
                                <group string="Sales Information" name="sales_person0">
                                    <field name="user_id"/>
                                    <field name="team_id" options="{'no_create': True}"/>
									<field name="tag_ids" widget="many2many_tags"/>
                                    <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>

                                </group>
                                <group string="..." name="sales_person1">
                                    <field name="type_id" required="1"/>
                                    <field name="partner_acc_mgr"/>
                                    <field name="analytic_account_id" attrs="{'invisible':[('state','=','sale'),('published_customer','!=', False)]}"
                                           context="{'default_partner_id':partner_invoice_id, 'default_name':name}" groups="analytic.group_analytic_accounting"/>
                                    <field name="nett_nett"/>

                                </group>
                                <group name="sale_pay" string="Invoicing">
                                    <field name="fiscal_position_id" options="{'no_create': True}"/>
                                    <field name="invoice_status"
                                        attrs="{'invisible': [('state', 'not in', ('sale','done'))]}"/>
                                    <field name="advertising" invisible="1"/>
                                </group>
                                <group string="Reporting" name="technical" >
                                    <field name="origin"/>
									<field name="campaign_id" />
									<field name="medium_id" />
									<field name="source_id" />
									<field name="opportunity_id" help="Log in the chatter from which opportunity the order originates" />
                                </group>
								<group string="Shipping Information" name="sale_shipping" groups="base.group_no_one">
								</group>

                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>

        <!--Inherited sale order form regular-->
        <record id="view_order_form_inherited" model="ir.ui.view">
            <field name="name">sale.order.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='team_id']" position="after">
                    <field name="partner_acc_mgr" />
                </xpath>
            </field>
        </record>

        <record id="view_order_form_advertising_no_deadline_check" model="ir.ui.view">
            <field name="name">sale.order.form.advertising.ndl</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale_advertising_order.view_order_form_advertising"/>
            <field name="groups_id" eval="[(4, ref('sale_advertising_order.group_no_deadline_check'))]"/>
            <field name="arch" type="xml">
                <field name="adv_issue_ids" position="attributes">
                     <attribute name="string">Advertising Issue</attribute>
                     <attribute name="domain" >[('parent_id','in', title_ids)]</attribute>
                </field>
                <field name="product_template_id" position="attributes">
                     <attribute name="attrs" >{'readonly': [('qty_invoiced', '&gt;', 0)]}</attribute>
                </field>
                <field name="product_uom_qty" position="attributes">
                     <attribute name="readonly" >False</attribute>
                </field>
                <field name="product_uom" position="attributes">
                     <attribute name="attrs" >{'readonly': [('state', 'in', ('sale','done', 'cancel'))]}</attribute>
                </field>
                <field name="analytic_tag_ids" position="attributes">
                    <attribute name="attrs" ></attribute>
                </field>
            </field>
        </record>

        <record id="view_order_form_advertising_traffic" model="ir.ui.view">
            <field name="name">sale.order.form.advertising.traffic</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale_advertising_order.view_order_form_advertising"/>
            <field name="groups_id" eval="[(4, ref('sale_advertising_order.group_ads_traffic_user'))]"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='order_line']/field[@name='order_line']" position="attributes">
                     <attribute name="attrs" >{'readonly': [('state', 'in', ['done','cancel'])]}</attribute>
                </xpath>
            </field>
        </record>

        <record id="view_order_advertising_tree" model="ir.ui.view">
            <field name="name">sale.order.advertising.tree</field>
            <field name="model">sale.order</field>
            <field name="priority">20</field>
            <field name="arch" type="xml">
                <tree string="Sales Orders" multi_edit="1" sample="1">
                    <field name="message_needaction" invisible="1"/>
                    <field name="name" string="Order Number" decoration-bf="1"/>
                    <field name="date_order" widget="date" optional="show"/>
                    <field name="opportunity_subject" string="Subject"/>
                    <field name="published_customer"/>
                    <field name="advertising_agency"/>
                    <field name="partner_acc_mgr"/>
                    <field name="user_id" optional="show" widget="many2one_avatar_user"/>
                    <field name="operating_unit_id" groups="operating_unit.group_multi_operating_unit"/>
                    <field name="activity_ids" widget="list_activity" optional="show"/>
                    <field name="team_id" optional="hide"/>
                    <field name="amount_untaxed" sum="Total Tax Excluded" widget="monetary" optional="hide"/>
                    <field name="amount_tax" sum="Tax Total" widget="monetary" optional="hide"/>
                    <field name="amount_total" sum="Total Tax Included" widget="monetary" decoration-bf="1" optional="show"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="invoice_status" decoration-success="invoice_status == 'invoiced'" decoration-info="invoice_status == 'to invoice'" decoration-warning="invoice_status == 'upselling'" widget="badge" optional="show"/>
                    <field name="tag_ids" optional="hide" widget="many2many_tags" options="{'color_field': 'color'}"/>
                    <field name="state" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="advertising_order_view_search_inherit_sale" model="ir.ui.view">
            <field name="name">advertising.sale.order.search.inherit.sale</field>
            <field name="model">sale.order</field>
            <field name="mode">primary</field>
            <field name="inherit_id" ref="sale.view_sales_order_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='my_sale_orders_filter']" position="after">
                    <separator/>
                    <filter string="Sales" name="sales" domain="[('state','in',('sale','done'))]"/>
                    <filter name="department" string="Department" domain="[]" groups="operating_unit.group_multi_operating_unit" context="{'group_by':'operating_unit_id'}"/>
                    <filter name="accmgr_sale_orders_filter" string="My Sales Orders (Account Manager)"
                            domain="[('partner_acc_mgr','=',uid)]" help="My Advertising Sales Orders as Account manager"/>
                    <field name="partner_acc_mgr"/>
                    <field name="published_customer"/>
                    <field name="advertising_agency"/>
                    <separator/>
                    <filter string="To Invoice" name="to_invoice" domain="[('invoice_status','=','to_invoice')]"/>

                    <separator/>
                    <filter string="Submitted" name="submitted" domain="[('state','=','submitted')]"/>
                    <filter string="Sales Mgr Approved" name="approved1" domain="[('state','=','approved1')]" groups="sale_advertising_order.group_ads_sales_manager"/>
                </xpath>

                <field name="partner_id" position="after">
                    <field name="operating_unit_id" groups="operating_unit.group_multi_operating_unit"/>
                </field>

                <field name="analytic_account_id" position="after">
                    <field name="date_from" string="Order Date From" filter_domain="[('date_order','&gt;=',self)]"/>
                    <field name="date_to" string="Order Date To" filter_domain="[('date_order','&lt;=',self)]"/>
                </field>
                <xpath expr="." position="inside">
                    <filter string="Account Manager" name="acc_manager" icon="terp-personal" domain="[]" context="{'group_by':'partner_acc_mgr'}"/>
                </xpath>
            </field>
        </record>


        <record id="action_orders_advertising" model="ir.actions.act_window">
            <field name="name">Sales Orders</field>
            <field name="res_model">sale.order</field>
            <field name="view_mode">tree,form,calendar,pivot,graph</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="search_view_id" ref="advertising_order_view_search_inherit_sale"/>
            <field name="domain"
                   eval="[('type_id','=', ref('sale_advertising_order.ads_sale_type')), ('advertising','=',True), ('state','not in',('draft','sent','cancel'))]"
            />
            <field name="context"
                eval="{'default_advertising': 1, 'default_type_id': ref('sale_advertising_order.ads_sale_type')}"
            />
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Create a Quotation, the first step of a new sale.
              </p><p>
                Your next actions should flow efficiently: confirm the Quotation to an Advertising Order, then create the Invoice and collect the Payment.
              </p><p>
                Note that once a Quotation becomes a Order, it will be moved from the Quotations list to the Order list.
              </p>
            </field>
        </record>

        <record id="action_orders_advertising_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="act_window_id" ref="action_orders_advertising"/>
        </record>

        <record id="action_orders_advertising_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_order_advertising_tree"/>
            <field name="act_window_id" ref="action_orders_advertising"/>
        </record>


        <!--Action for Advertising Sales smart button in Customers-->
        <record id="action_orders_advertising_smart_button" model="ir.actions.act_window">
            <field name="name">Advertising Sales Orders</field>
            <field name="res_model">sale.order</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="search_view_id" ref="advertising_order_view_search_inherit_sale"/>
            <field name="context" model='sale.order' eval="obj()._ctx_4_action_orders_advertising_smart_button()"/>
            <field name="domain" model='sale.order' eval="obj()._domain_4_action_orders_advertising_smart_button()"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Create a Quotation, the first step of a new sale.
              </p><p>
                Your next actions should flow efficiently: confirm the Quotation to a Sale Order, then create the Invoice and collect the Payment.
              </p><p>
                Note that once a Quotation becomes a Sale Order, it will be moved from the Quotations list to the Sales Order list.
              </p>
            </field>
        </record>

        <record id="action_orders_advertising_smart_button_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="act_window_id" ref="action_orders_advertising_smart_button"/>
        </record>

        <record id="action_orders_advertising_smart_button_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_order_advertising_tree"/>
            <field name="act_window_id" ref="action_orders_advertising_smart_button"/>
        </record>

        <record id="view_quotation_advertising_tree" model="ir.ui.view">
            <field name="name">sale.order.advertising.tree</field>
            <field name="model">sale.order</field>
            <field name="priority">40</field>
            <field name="arch" type="xml">
                <tree string="Quotation" class="o_sale_order" multi_edit="1" sample="1">
                    <field name="message_needaction" invisible="1"/>
                    <field name="name" string="Quotation Number" readonly="1" decoration-bf="1"/>
                    <field name="create_date" string="Creation Date" widget="date" optional="show"/>
                    <field name="date_order"/>
                    <field name="opportunity_subject" string="Subject"/>
                    <field name="published_customer"/>
                    <field name="advertising_agency"/>
                    <field name="partner_acc_mgr" optional="show"/>
                    <field name="user_id" widget="many2one_avatar_user" optional="show"/>
                    <field name="operating_unit_id" groups="operating_unit.group_multi_operating_unit"/>
                    <field name="activity_ids" widget="list_activity" optional="show"/>
                    <field name="team_id" optional="hide"/>
                    <field name="tag_ids" optional="hide" widget="many2many_tags" options="{'color_field': 'color'}"/>
                    <field name="amount_untaxed" sum="Total Tax Excluded" widget="monetary" optional="hide"/>
                    <field name="amount_tax" sum="Tax Total" widget="monetary" optional="hide"/>
                    <field name="amount_total" sum="Total Tax Included" widget="monetary" decoration-bf="1" optional="show"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="state" decoration-success="state == 'sale' or state == 'done'" decoration-info="state == 'draft' or state == 'sent'" widget="badge" optional="show"/>
                    <field name="invoice_status" optional="hide"/>
                </tree>
            </field>
        </record>

        <record id="sale.sale_order_view_search_inherit_quotation" model="ir.ui.view">
            <field name="name">sale.order.search.inherit.quotation</field>
            <field name="model">sale.order</field>
            <field name="mode">primary</field>
            <field name="inherit_id" ref="sale.view_sales_order_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='my_sale_orders_filter']" position="after">
                    <separator/>
                    <filter string="Quotations" name="draft" domain="[('state','=','draft')]"/>
                    <filter string="Quotations Sent" name="sent" domain="[('state','=','sent')]"/>
                    <filter string="Sales" name="sales" domain="[('state','in',('sale','done'))]"/>
                    <separator/>
                    <filter string="Overdue Quotations" name="overdue_quotes"
                            domain="[('validity_date', '&lt;', context_today().strftime('%Y-%m-%d'))]"
                            help="Show all regular quotations for which the expiration date is before today"/>
                </xpath>
            </field>
        </record>

        <record id="advertising_order_view_search_inherit_quotation" model="ir.ui.view">
            <field name="name">advertising.sale.order.search.inherit.quotation</field>
            <field name="model">sale.order</field>
            <field name="mode">primary</field>
            <field name="inherit_id" ref="sale.view_sales_order_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='my_sale_orders_filter']" position="after">
                    <separator/>
                    <filter string="Quotations Draft" name="draft" domain="[('state','=','draft')]"/>
                    <filter string="Quotations Sent" name="sent" domain="[('state','=','sent')]"/>
                    <filter string="Quotations" name="quotations" domain="[('state','not in',('sale','done','cancel'))]"/>
                    <separator/>
                    <filter string="Sales" name="sales" domain="[('state','in',('sale','done'))]"/>
                    <filter name="accmgr_sale_orders_filter" string="My Sales Orders (Account Manager)" domain="[('partner_acc_mgr','=',uid)]" help="My Sales Orders as Account manager" icon="terp-personal" />
                    <field name="partner_acc_mgr"/>

                    <separator/>
                    <filter string="Submitted" name="submitted" domain="[('state','=','submitted')]"/>
                    <filter string="Sales Mgr Approved" name="approved1" domain="[('state', '=', 'approved1')]"/>

                    <separator/>
                    <filter string="Overdue Quotations" name="overdue_quotes"
                            domain="[('validity_date', '&lt;', context_today().strftime('%Y-%m-%d'))]"
                            help="Show all advertising quotations for which the expiration date is before today"/>
                </xpath>

                <field name="analytic_account_id" position="after" >
                    <field name="date_from" string="Order Date From" filter_domain="[('date_order','&gt;=',self)]"/>
                    <field name="date_to" string="Order Date To" filter_domain="[('date_order','&lt;=',self)]"/>
                </field>
                <xpath expr="." position="inside">
                    <filter string="Account Manager" name="acc_manager" icon="terp-personal" domain="[]" context="{'group_by':'partner_acc_mgr'}"/>
                </xpath>
            </field>
        </record>

        <record id="action_quotations_advertising" model="ir.actions.act_window">
            <field name="name">Quotations </field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order</field>
            <field name="view_id" ref="view_quotation_advertising_tree"/>
            <field name="view_mode">tree,kanban,form,calendar,pivot,graph</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="search_view_id" ref="advertising_order_view_search_inherit_quotation"/>
            <field name="domain"
                   eval="[('type_id','=', ref('sale_advertising_order.ads_sale_type')), ('advertising','=',True),('state','not in',('sale','done'))]"
            />
            <field name="context"
                eval="{'default_advertising': 1, 'default_type_id': ref('sale_advertising_order.ads_sale_type'), 'hide_sale': 1}"
            />
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Create a Quotation, the first step of a new sale.
              </p><p>
                Your next actions should flow efficiently: confirm the Quotation
                to an Advertising Order, then create the Invoice and collect the Payment.
              </p><p>
                Note that once a Quotation becomes an Order, it will be moved
                from the Quotations list to the Order list.
              </p>
            </field>
        </record>

        <record id="action_quotations_advertising_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="act_window_id" ref="action_quotations_advertising"/>
        </record>

        <record id="action_quotations_advertising_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_quotation_advertising_tree"/>
            <field name="act_window_id" ref="action_quotations_advertising"/>
        </record>



<!-- New Menuitem -->

		<record model="ir.actions.act_window" id="all_advertising_orders_action">
			<field name="name">All Advertising Sale Orders</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">sale.order</field>
			<field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="domain"
                   eval="[('type_id','=', ref('sale_advertising_order.ads_sale_type')), ('advertising','=',True),('published_customer','&lt;&gt;', False)]"
            />
            <field name="context"
                eval="{'default_advertising': 1, 'default_type_id': ref('sale_advertising_order.ads_sale_type')}"
            />
		</record>

        <record id="all_advertising_orders_action_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="act_window_id" ref="all_advertising_orders_action"/>
        </record>

        <record id="all_advertising_orders_action_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_order_advertising_tree"/>
            <field name="act_window_id" ref="all_advertising_orders_action"/>
        </record>

        <record id="sale_action_quotations_new_adv" model="ir.actions.act_window">
            <field name="name">Quotation</field>
            <field name="res_model">sale.order</field>
            <field name="view_mode">form,tree,graph</field>
            <field name="domain" model='sale.order' eval="obj()._domain_4_sale_action_quotations_new_adv()"/>
            <field name="context" model='sale.order' eval="obj()._ctx_4_sale_action_quotations_new_adv()"/>
        </record>

        <record id="sale_action_quotations_new_adv_form" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="act_window_id" ref="sale_action_quotations_new_adv"/>
        </record>

        <record id="sale_action_quotations_new_adv_tree" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_quotation_advertising_tree"/>
            <field name="act_window_id" ref="sale_action_quotations_new_adv"/>
        </record>

        <record id="sale_action_quotations_adv" model="ir.actions.act_window">
            <field name="name">Quotations</field>
            <field name="res_model">sale.order</field>
            <field name="domain" model='sale.order' eval="obj()._domain_4_sale_action_quotations_adv()"/>
            <field name="context" model='sale.order' eval="obj()._ctx_4_sale_action_quotations_adv()"/>
        </record>

        <record id="sale_action_quotations_adv_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="act_window_id" ref="sale_action_quotations_adv"/>
        </record>

        <record id="sale_action_quotations_adv_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_quotation_advertising_tree"/>
            <field name="act_window_id" ref="sale_action_quotations_adv"/>
        </record>

        <record id="view_adv_order_line_tree" model="ir.ui.view">
            <field name="name">sale.adv.order.line.tree</field>
            <field name="model">sale.order.line</field>
            <field name="arch" type="xml">
                <tree string="Sales Order Lines" create="false">
                        <field name="order_id" />
                        <field name="id" optional="hide"/>
                        <field name="order_advertiser_id" />
                        <field name="order_agency_id" />
                        <field name="title" optional="hide"/>
                        <field name="adv_issue" />
                        <field name="issue_date" />
                        <field name="from_date"/>
                        <field name="to_date"/>
                        <field name="ad_class" optional="hide"/>
                        <field name="product_id" optional="hide"/>
                        <field name="name" optional="hide"/>
                        <field name="ad_number"/>
                        <field name="product_uom" optional="hide"/>
                        <field name="price_unit" optional="hide"/>
                        <field name="product_uom_qty" optional="hide"/>
                        <field name="actual_unit_price" optional="hide"/>
                        <field name="computed_discount" optional="hide"/>
                        <field name="subtotal_before_agency_disc" optional="hide"/>
                        <field name="discount_dummy" optional="hide"/>
                        <field name="tax_id" optional="hide"/>
                        <field name="price_subtotal" widget="monetary" groups="account.group_show_line_subtotals_tax_excluded"/>
                        <field name="price_total" widget="monetary" groups="account.group_show_line_subtotals_tax_included"/>
                        <field name="state" invisible="1"/>
                        <field name="invoice_status" />
                        <field name="currency_id" invisible="1"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_adv_order_line_pivot">
            <field name="name">sale.adv.order.line.pivot</field>
            <field name="model">sale.order.line</field>
            <field name="arch" type="xml">
                <pivot string="Advertising Order Lines" display_quantity="true">
                    <field name="title"/>
                    <field name="price_total" type="measure"/>
                </pivot>
            </field>
        </record>


         <!--
                Order Line (Adv /To Invoice)
                Form: (Redefined)
        -->
    <record model="ir.ui.view" id="view_adv_order_line_form">
        <field name="name">sale.order.line.form.to.invoice</field>
        <field name="model">sale.order.line</field>
        <field name="arch" type="xml">
            <form string="Sales Order Lines" create="0" edit="0" delete="0">
                <header>
                    <field name="invoice_status" widget="statusbar" statusbar_visible="invoiced,to invoice,no"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="display_name" readonly="1"/>
                        </h1>
                    </div>
                    <group name="sale_header">
                        <group name="sh1">
                            <field name="order_partner_id" readonly="0" required="True"
                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}" />
                            <field name="order_advertiser_id" required="True"
                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}" />
                        </group>
                        <group name="sh2">
                            <field name="order_id" readonly="1" required="1"
                                   options="{'no_create': True, 'no_create_edit': True}"
                                   context="{'form_view_ref': 'sale_advertising_order.view_order_form_advertising'}"/>
                            <field name="order_pricelist_id" invisible="1"/>
                            <field name="company_id" invisible="1"/>
                        </group>
                    </group>
                    <group>
                        <group name="prod_section">
                            <field name="medium" required="True"
                                   domain="[('parent_id','=', %(sale_advertising_order.advertising_category)d)]"
                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"/>
                            <field name="ad_class" required="True"
                                   domain="[('id','child_of', medium)]"
                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"/>
                            <field name="title" string="Title" invisible="1"/>
                            <field name="title_ids" string="Title(s)"
                                   widget="many2many_tags"
                                   domain="[('parent_id','=', False), ('medium','child_of', medium)]"
                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"
                                   context="{'active_test': False, 'search_view_ref':'sale_advertising_order.view_advertising_issue_filter',
                                             'tree_view_ref':'sale_advertising_order.advertising_issue_titles_tree' }">
                            </field>
                            <field name="from_date"
                                   attrs="{'invisible':[('date_type','!=','validity')], 'required':[('date_type','=','validity')]}"/>
                            <field name="to_date"
                                   attrs="{'invisible':[('date_type','!=','validity')], 'required':[('date_type','=','validity')]}"/>
                            <field name="deadline_offset" invisible="1" groups="base.group_no_one"/>
                            <field name="deadline_passed" invisible="1" />
                            <field name="deadline" invisible="0" />
                             <field name="adv_issue_ids" string="Advertising Issue(s)"
                                   widget="many2many_tags"
                                   attrs="{'readonly': [('issue_product_ids','!=', [])]}"
                                   domain="[('parent_id','in', title_ids),
                                            '|','|',('deadline','&gt;=', deadline_offset),('deadline','=', False),
                                                    ('issue_date','&lt;=', datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S'))]"
                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"
                                   context="{'active_test': False, 'search_view_ref':'sale_advertising_order.view_advertising_issue_filter',
                                             'tree_view_ref':'sale_advertising_order.advertising_issue_ids_tree' }">
                            </field>
                            <field name="issue_date" readonly="1" force_save="1"
                                   attrs="{'invisible': [('multi_line', '=', True)]}"/>
                            <field name="domain4prod_ids" invisible="1"/>
                            <field name="product_template_id"
                                   context="{'partner_id':order_partner_id, 'quantity':product_uom_qty, 'pricelist':order_pricelist_id, 'uom':product_uom, 'company_id': company_id}"
                                   attrs="{'readonly': ['|',('qty_invoiced', '&gt;', 0), ('deadline_passed','=', True)]}"
                                   domain="[('id','in', domain4prod_ids)]"
                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}" required="1"/>

                            <field name="product_id" readonly="1" groups="base.group_no_one"
                                   context="{'partner_id':order_partner_id, 'quantity':product_uom_qty, 'pricelist':order_pricelist_id, 'uom':product_uom, 'company_id': company_id}"
                                   attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"
                                   domain="['|','&amp;',('categ_id','=', ad_class),('product_template_attribute_value_ids','=', False),('product_tmpl_id','=', product_template_id)]"
                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"/>

<!--                            <field name="booklet_surface_area" readonly="1"/>-->

                            <field name="nett_nett" />
                            <field name="multi_line" invisible="0" groups="base.group_no_one"/>
                            <field name="multi_line_number" invisible="0" readonly="True" groups="base.group_no_one"/>

                        </group>
                        <group name="price_section">
                            <label for="customer_lead" invisible="1" groups="base.group_no_one"/>
                            <div groups="base.group_no_one" invisible="1">
                                <field name="customer_lead" class="oe_inline" groups="base.group_no_one"/> days
                            </div>
                            <field name="qty_to_invoice" invisible="1"/>
                            <field name="qty_delivered_manual" invisible="1"/>
                            <label for="product_uom_qty" string="Ordered Quantity"/>
                            <div>
                                <field name="product_uom_qty" class="oe_inline"
                                       context="{'partner_id':order_partner_id, 'quantity':product_uom_qty, 'pricelist':order_pricelist_id,
                                                    'uom':product_uom, 'uom_qty_change':True, 'company_id': company_id}"
                                       attrs="{'readonly': [('deadline_passed','=', True)]}"/>
                                <field name="product_uom" groups="uom.group_uom" class="oe_inline oe_no_button"
                                       readonly="True"/>
                            </div>
                            <label for="qty_delivered" string="Delivered Quantity" invisible="context.get('hide_sale')" groups="base.group_no_one"/>
                            <div invisible="context.get('hide_sale')" groups="base.group_no_one">
                                <field name="qty_delivered" attrs="{'readonly': [('qty_delivered_manual', '=', False)]}"/>
                            </div>
                            <label for="qty_invoiced" string="Invoiced Quantity" invisible="context.get('hide_sale')" groups="base.group_no_one"/>
                            <div invisible="context.get('hide_sale')" groups="base.group_no_one">
                                <field name="qty_invoiced" invisible="context.get('hide_sale')"/>
                            </div>
                            <field name="adv_issue" invisible="1"/>
                            <field name="tax_id" widget="many2many_tags" options="{'no_create': True}" context="{'search_view_ref': 'account.account_tax_view_search'}"
                                   domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                                    attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"
                                    groups="sale_advertising_order.group_ads_traffic_user"/>
                            <field name="price_edit" invisible="1"/>
                            <field name="price_unit" readonly="0" attrs="{'invisible': [('price_edit','!=', True)]}"
                                   widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="price_unit_dummy" readonly="1" attrs="{'invisible': [('multi_line','!=', False),('price_edit','=', True)]}"
                            widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="comb_list_price" readonly="True" attrs="{'invisible': [('multi_line','=', False)]}"
                                    widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="actual_unit_price" attrs="{'invisible': [('multi_line','=', True)]}"
                                    widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <label for="computed_discount" groups="product.group_discount_per_so_line"/>
                                <div name="computed_discount" groups="product.group_discount_per_so_line">
                                    <field name="computed_discount" class="oe_inline"/> %%
                                </div>
                            <field name="discount_reason_id" attrs="{'invisible': [('computed_discount','=', 0.0)],'required': [('computed_discount','!=', 0.0)]}"/>
                            <field name="subtotal_before_agency_disc" readonly="False"/>
                            <label for="discount" string="Agency Commission" groups="product.group_discount_per_so_line"/>
                                <div name="discount" groups="product.group_discount_per_so_line">
                                    <field name="discount" invisible="1"/>
                                    <field name="discount_dummy" class="oe_inline"/> %%
                                </div>
                            <field name="price_subtotal" readonly="True" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />
                            <field name="date_type" invisible="True"/>
                            <field name="currency_id" invisible="1"/>
                            </group>
                        </group>
                       <notebook>
                           <page string="Remarks">
                               <group>
                                   <group>
                                       <separator string="Description" colspan="2"/>
                                       <field name="name" colspan="2" nolabel="1"/>
                                       <separator string="Material Remarks" colspan="2"/>
                                       <field name="layout_remark" colspan="2" nolabel="1"/>
                                       <separator string="Migration Remarks" colspan="2"/>
                                       <field name="mig_remark" colspan="2" nolabel="1"/>
                                    </group>
                                   <group>
                                       <field name="booklet_surface_area"/>
                                       <field name="page_class_domain" invisible="1"/>
                                       <label for="analytic_tag_ids" string="Page Category"/>
                                       <div>
                                            <field name="analytic_tag_ids"
                                                   string="Page Category"
                                                   widget="many2many_tags"
                                                   domain="page_class_domain"
                                                   attrs="{'readonly': [('deadline_passed','=', True)]}"/>
                                       </div>
                                        <field name="ad_number" attrs="{'invisible':[('multi_line','!=', False)]}"/>
                                        <field name="page_reference" attrs="{'invisible':[('multi_line','!=', False)]}"/>
                                        <field name="url_to_material" attrs="{'invisible':[('multi_line','!=', False)]}"/>
                                   </group>
                               </group>
                               <div groups="base.group_no_one">
                                   <label for="invoice_lines"/>
                                   <field name="invoice_lines"/>
                               </div>
                               <field name="state" invisible="1"/>
                           </page>
                           <page string="Proof Numbers">
                               <group>
                                   <group>
                                       <field name="proof_number_adv_customer" string="Proof Number Advertising Customer" domain="[('is_customer', '=', True)]" context="{'default_parent_id': 'parent.partner_id', 'show_email': 1}" options="{'no_create_edit': True}" widget="many2many_tags"/>
                                       <!--<field name="proof_number_payer" />-->
                                       <field name="proof_number_amt_adv_customer" attrs="{'invisible':[('proof_number_amt_adv_customer','=', 0)],'required':[('proof_number_adv_customer','!=', False)]}"/>
                                   </group>
                                   <group>
                                       <field name="page_class_domain" invisible="1"/>
                                       <label for="analytic_tag_ids" string="Page Category"/>
                                       <div>
                                           <field name="analytic_tag_ids"
                                               string="Page Category"
                                               widget="many2many_tags"
                                               domain="page_class_domain"
                                               attrs="{'readonly': [('deadline_passed','=', True)]}"/>
                                       </div>
                                       <field name="ad_number" attrs="{'invisible':[('multi_line','!=', False)]}"/>
                                       <field name="page_reference" attrs="{'invisible':[('multi_line','!=', False)]}"/>
                                       <field name="url_to_material" attrs="{'invisible':[('multi_line','!=', False)]}"/>
                                   </group>
                               </group>
                           </page>
                           <page string="Adv.Issues with Products and Prices"
                                attrs="{'invisible':['|',('issue_product_ids','=',[]),('medium','!=', %(sale_advertising_order.newspaper_advertising_category)d)]}">
                                <field name="issue_product_ids" nolabel="1" string="Adv.Issues with Products and Prices"
                                       attrs="{'invisible':['|',('issue_product_ids','=',[]),('medium','!=', %(sale_advertising_order.newspaper_advertising_category)d)]}"
                                       options="{'no_create': True, 'no_create_edit': True}" readonly="0">
                                    <tree string="Issues Products Prices" editable="bottom">
                                        <field name="adv_issue_id" string="Issue" force_save="1" domain="[('parent_id','in', parent.title_ids and parent.title_ids[0][2])]"/>
                                        <field name="product_attribute_value_id" force_save="1" invisible="True" />
                                        <field name="product_id" string="Product" force_save="1" domain="[('product_tmpl_id','=', parent.product_template_id), ('product_template_attribute_value_ids','in', product_attribute_value_id)]"/>
                                        <field name="price_unit" force_save="1" string="Unit Price"/>
                                        <field name="qty" force_save="1" string="Qty"/>
                                        <field name="price" force_save="1" string="Price"/>
                                        <field name="page_reference" string="Ref" />
                                        <field name="ad_number" string="Ad No." />
                                        <field name="url_to_material" string="URL Ad Material" />
                                    </tree>
                                </field>
                           </page>

                           <page string="Other">
                               <group>
                                   <group>
                                        <separator string="Material Remarks" colspan="2"/>
                                        <field name="layout_remark" colspan="2" nolabel="1"/>
                                    </group>
                                   <group>
                                       <separator string="Description" colspan="2"/>
                                       <field name="name" colspan="2" nolabel="1"/>
                                   </group>
                                   <group>
                                       <separator string="Migration Remarks" colspan="2"/>
                                       <field name="mig_remark" colspan="2" nolabel="1"/>
                                   </group>
                               </group>
                               <div groups="base.group_no_one">
                                    <label for="invoice_lines"/>
                                    <field name="invoice_lines"/>
                               </div>
                           </page>

                       </notebook>

                        <field name="state" invisible="1"/>
                    </sheet>
                </form>
            </field>
        </record>


        <!--
                Order Line (To Invoice)
                Form: (Traffic User)
        -->
        <record id="view_adv_order_line_form_editable" model="ir.ui.view">
            <field name="name">sale.adv.order.line.form.edit</field>
            <field name="model">sale.order.line</field>
            <field name="inherit_id" ref="view_adv_order_line_form"></field>
            <field name="groups_id" eval="[(4, ref('sale_advertising_order.group_ads_traffic_user'))]"/>
            <field name="arch" type="xml">
                <xpath expr="//form" position="attributes">
                    <attribute name="create">1</attribute>
                    <attribute name="edit">1</attribute>
                    <attribute name="delete">1</attribute>
                </xpath>
            </field>
        </record>


        <record id="view_advertising_sales_order_line_filter" model="ir.ui.view">
            <field name="name">adv.sale.order.line.select</field>
            <field name="model">sale.order.line</field>
            <field name="arch" type="xml">
                <search string="Search Advertising Sales Order Lines">
                    <filter string="To Invoice" name="to_invoice" domain="[('qty_to_invoice','&lt;&gt;', 0)]"  help="Sales Order Lines ready to be invoiced"/>
                    <separator/>
                    <filter name="my_sales_order_line" string="My Sales Order Lines" domain="[('salesman_id','=',uid)]" help="Sales Order Lines related to a Sales Order of mine"/>
                    <filter name="accmgr_sale_orders_filter" string="My Sales Order Lines (Account Manager)"
                            domain="[('partner_acc_mgr','=',uid)]" help="My Sales Order Lines as Account manager" />
                    <filter name="issue_date_sale_orders_filter" string="Order Lines with Issue Date before today"
                            domain="[('issue_date','&lt;=', datetime.datetime.now())]" help="Order Lines with Issue Date before today" />
                    <filter name="from_date_sale_orders_filter" string="Order Lines with Start of Validity before today"
                            domain="[('from_date','&lt;=', datetime.datetime.now())]" help="Order Lines with Start of validity before today" />
                    <field name="order_id"/>
                    <field name="order_partner_id" operator="child_of"/>
                    <field name="order_advertiser_id" operator="child_of"/>
                    <field name="order_agency_id" operator="child_of"/>
                    <field name="product_id"/>
                    <field name="salesman_id"/>
                    <field name="partner_acc_mgr"/>
                    <field name="issue_date"/>
                    <group expand="0" string="Group By">
                        <filter name="customer" string="Customer" domain="[]" context="{'group_by':'order_partner_id'}"/>
                        <filter name="advertiser" string="Advertiser" domain="[]" context="{'group_by':'order_advertiser_id'}"/>
                        <filter name="agency" string="Agency" domain="[]" context="{'group_by':'order_agency_id'}"/>
                        <filter name="product" string="Product" domain="[]" context="{'group_by':'product_id'}"/>
                        <filter name="order" string="Order" domain="[]" context="{'group_by':'order_id'}"/>
                        <filter name="salesperson" string="Salesperson" domain="[]" context="{'group_by':'salesman_id'}"/>
                        <filter name="acc_manager" string="Account Manager" icon="terp-personal" domain="[]" context="{'group_by':'partner_acc_mgr'}"/>
                        <filter name="issue_date" string="Issue Date" icon="terp-personal" domain="[]" context="{'group_by':'issue_date'}"/>
                        <filter name="adv_issue" string="Advertising Issue" domain="[]" context="{'group_by':'adv_issue'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="all_advertising_order_lines_action">
			<field name="name">All Advertising Sale Order Lines</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">sale.order.line</field>
			<field name="view_mode">tree,form,pivot</field>
            <field name="view_id" ref="view_adv_order_line_form"/>
            <field name="search_view_id" ref="view_advertising_sales_order_line_filter"/>
            <field name="domain"
                   eval="[('order_id.type_id','=', ref('sale_advertising_order.ads_sale_type')), ('advertising','=',True),('state','in',('sale','done'))]"
            />
            <field name="context">{'search_default_to_invoice': 1}</field>
		</record>

        <record id="all_advertising_order_lines_action_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_adv_order_line_tree"/>
            <field name="act_window_id" ref="all_advertising_order_lines_action"/>
        </record>

        <record id="all_advertising_order_lines_action_tree_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">pivot</field>
            <field name="view_id" ref="view_adv_order_line_pivot"/>
            <field name="act_window_id" ref="all_advertising_order_lines_action"/>
        </record>

        <record id="all_advertising_order_lines_action_form_view" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_adv_order_line_form"/>
            <field name="act_window_id" ref="all_advertising_order_lines_action"/>
        </record>


        <!-- sale.advertising.issue object
        -->
		<record model="ir.ui.view" id="sale_advertising_issue_form">
			<field name="name">sale.advertising.issue.form</field>
			<field name="type">form</field>
			<field name="model">sale.advertising.issue</field>
			<field name="arch" type="xml">
				<form string="Advertising issue" >
                    <header>
                        <field name="state" widget="statusbar" statusbar_visible="open,close" clickable="True"/>
                    </header>
                    <div class="alert alert-info" role="alert" style="margin-bottom:0px;" attrs="{'invisible': [('to_update_issdt', '=', False)]}">
                        You have changed <bold>Issue Date !</bold> If you wish to update the same in existing Sales Order(s).
                        <button name="%(action_update_orderline)d" string="Click here" type="action"/>
                    </div>

					<sheet>
                        <div class="oe_button_box" name="button_box">
                            <button name="action_open_issue" type="object" class="oe_stat_button" icon="fa-tasks"
                                    attrs="{'invisible' : [('parent_id', '!=', False)]}" context="{'default_parent_id': active_id}" >
                                <field string="Issue(s)" name="issue_count" widget="statinfo"/>
                            </button>
                            <button name="toggle_active" type="object" groups="base.group_user" class="oe_stat_button" icon="fa-archive">
                                <field name="active" invisible="1" widget="boolean_button" options='{"terminology": "archive"}'/>
                            </button>
                        </div>
                        <widget name="web_ribbon" title="Closed"
                            bg_color="bg-danger" attrs="{'invisible': [('state', '!=', 'close')]}" />

                        <div class="oe_title">
                            <label for="name" class="oe_edit_only" string="Title / Issue"/>
                            <h1><field name="name" placeholder="Describe the name of Title / Issue..."/></h1>
                        </div>
						<group col="4" colspan="4" >
                            <field name="code" string="Code"/>
                            <field name="medium_domain" invisible="1"/>
							<field name="parent_id" string="Title" domain="[('parent_id','=', False)]"/>
                            <field name="price_edit" string="Price Editable"
                                   attrs="{'invisible':[('parent_id','=',True)]}"/>
                            <field name="medium" string="Medium" widget="many2many_tags"
                                   options="{'no_create': True, 'no_create_edit': True}"/>
                            <field name="product_attribute_value_id" string="Variant Title"
                                   attrs="{'required':[('parent_id','=',False),
                                   ('medium','in', (%(sale_advertising_order.newspaper_advertising_category)d,
                                                    %(sale_advertising_order.magazine_advertising_category)d))]}"/>
							<field name="analytic_account_id" string="Related Analytic Account"/>
							<field name="issue_date" string="Issue Date"/>
                            <field name="issue_week_number" string="Week Number"/>
                            <field name="deadline" string="Deadline"/>
							<field name="default_note" string="Default Note" />
                            <field name="active" widget="boolean_toggle"/>
                        </group>
                            <field name="available_ids" string="Availability" >
                                 <tree string="Availability">
                                    <field name="name" string="Name"/>
                                    <field name="page_id" string="Ad Page"/>
                                    <field name="order_line_id" string="Ad Placement"/>
                                    <field name="available_qty" string="Quantity"/>
                                 </tree>
                            </field>
                        <group class="oe_subtotal_footer oe_right">
                            <field name="amount_total" class="oe_subtotal_footer_separator"/>
                        </group>
                        <field name="to_update_issdt" invisible="1"/>
					</sheet>
				</form>
			</field>
		</record>

		<record id="sale_advertising_issue_tree" model="ir.ui.view" >
			<field name="name">sale.advertising.issue.tree</field>
			<field name="type">tree</field>
			<field name="model">sale.advertising.issue</field>
			<field name="arch" type="xml">
				<tree string="Advertising issue" decoration-info="not parent_id" >
                    <field name="name" string="Name" decoration-bf="not parent_id"/>
                    <field name="code" string="Code"/>
                    <field name="parent_id" string="Title" />
                    <field name="product_attribute_value_id" string="Variant Title" optional="hide"/>
                    <field name="analytic_account_id" string="Related Analytic Account" optional="hide"/>
                    <field name="issue_date" string="Issue Date"/>
                    <field name="issue_week_number" string="Week Number" optional="hide"/>
                    <field name="week_number_even" optional="hide"/>
                    <field name="deadline" string="Deadline"/>
                    <field name="medium" string="Medium" />
                    <field name="default_note" string="Default Note"/>
                    <field name="state" string="Status" decoration-success="state == 'open'" decoration-muted="state == 'cancel'" widget="badge"/>
				</tree>
			</field>
		</record>

        <!--view for search view "Titles" in Order Line -->
        <record id="advertising_issue_titles_tree" model="ir.ui.view" >
			<field name="name">sale.advertising.issue.tree</field>
			<field name="type">tree</field>
			<field name="model">sale.advertising.issue</field>
			<field name="arch" type="xml">
				<tree string="Advertising issue" default_order='name asc'>
                    <field name="name" string="Name"/>
                    <field name="code" string="Code"/>
                    <field name="product_attribute_value_id" string="Variant Title"/>
                    <field name="analytic_account_id" string="Related Analytic Account"/>
                    <field name="medium" string="Medium"/>
                    <field name="default_note" string="Default Note" />
                    <field name="state" string="Status" decoration-success="state == 'open'" decoration-muted="state == 'cancel'" widget="badge"/>
				</tree>
			</field>
		</record>

        <!--view for search view "Issues" in Order Line -->
        <record id="advertising_issue_ids_tree" model="ir.ui.view" >
			<field name="name">sale.advertising.issue.tree</field>
			<field name="type">tree</field>
			<field name="model">sale.advertising.issue</field>
			<field name="arch" type="xml">
				<tree string="Advertising issue" default_order="issue_date asc">
                    <field name="name" string="Name"/>
                    <field name="code" string="Code"/>
                    <field name="parent_id" string="Title"/>
                    <field name="analytic_account_id" string="Related Analytic Account"/>
                    <field name="issue_date" string="Issue Date"/>
                    <field name="issue_week_number" string="Week Number"/>
                    <field name="week_number_even" invisible="1"/>
                    <field name="deadline" string="Deadline"/>
                    <field name="medium" string="Medium"/>
                    <field name="default_note" string="Default Note" />
                    <field name="state" string="Status" decoration-success="state == 'open'" decoration-muted="state == 'cancel'" widget="badge"/>
				</tree>
			</field>
		</record>

        <record id="view_advertising_issue_filter" model="ir.ui.view">
            <field name="name">sale.advertising.issue.tree</field>
            <field name="model">sale.advertising.issue</field>
            <field name="arch" type="xml">
                <search string="Search Advertising Titles/Issues">
                    <filter name="title" string="Titles" domain="[('parent_id','=', False)]"/>
                    <filter name="issue" string="Issues" domain="[('parent_id','!=', False)]"/>
                    <separator/>
                    <filter name="even_week_number" string="Even Week Numbers" domain="[('week_number_even','=', True)]" help="Issues in even weeks"/>
                    <filter name="uneven_week_number" string="Uneven Week Numbers" domain="[('week_number_even','=',False)]" help="Issues in uneven weeks"/>
                    <field name="name"/>
                    <field name="parent_id" operator="child_of"/>
                    <field name="medium"/>
                    <field name="analytic_account_id"/>
                    <group expand="0" string="Group By">
                        <filter name="week_number" string="Weeknumbers" domain="[]" context="{'group_by':'issue_week_number'}"/>
                        <filter name="title" string="Title" domain="[]" context="{'group_by':'parent_id'}"/>
                        <filter name="issue_date" string="Issue Date" domain="[]" context="{'group_by':'issue_date'}"/>
                    </group>
                </search>
            </field>
        </record>

		<record model="ir.actions.act_window" id="action_sale_advertising_issue">
			<field name="name">Advertising Issue</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">sale.advertising.issue</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="sale_advertising_issue_tree"/>
			<field name="domain">[('parent_id','!=', False)]</field>
		</record>


        <!--
                Advertising Issue (Title)
        -->
		<record model="ir.actions.act_window" id="action_sale_advertising_issue_title">
			<field name="name">Advertising Title</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">sale.advertising.issue</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="advertising_issue_titles_tree"/>
			<field name="domain">[('parent_id','=', False)]</field>
		</record>


        <!-- sale.advertising.page
        -->
		<record id="sale_advertising_page_tree" model="ir.ui.view" >
			<field name="name">sale.advertising.page.tree</field>
			<field name="type">tree</field>
			<field name="model">sale.advertising.page</field>
			<field name="arch" type="xml">
				<tree string="Advertising Pages" editable="top">
						<field name="name" string="Page Name"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_sale_advertising_page">
			<field name="name">Advertising Page</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">sale.advertising.page</field>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="sale_advertising_page_tree"/>
		</record>


        <!-- sale.advertising.available
         -->
		<record model="ir.ui.view" id="sale_advertising_available_form">
			<field name="name">sale.advertising.available.form</field>
			<field name="type">form</field>
			<field name="model">sale.advertising.available</field>
			<field name="arch" type="xml">
				<form string="Page Availability" >
					<sheet>
						<group >
                            <field name="adv_issue_id" string="Issue"/>
                            <field name="issue_date" />
							<field name="name" string="Page Name"/>
                            <field name="page_id" string="Ad Page"/>
                            <field name="order_line_id" string="Ad Placement" readonly="1"/>
                            <field name="available_qty" string="Quantity"/>
                        </group>
					</sheet>
				</form>
			</field>
		</record>
		<record id="sale_advertising_available_tree" model="ir.ui.view" >
			<field name="name">sale.advertising.available.tree</field>
			<field name="type">tree</field>
			<field name="model">sale.advertising.available</field>
			<field name="arch" type="xml">
                <tree name="page_available" string="Page Availability" create="false" delete="false">
                    <field name="adv_issue_id" string="Issue" />
                    <field name="issue_date" />
                    <field name="name" string="Name" />
                    <field name="page_id" string="Ad Page" />
                    <field name="order_line_id" string="Ad Placement" />
                    <field name="available_qty" string="Quantity" />
                </tree>
			</field>
		</record>

        <record id="sale_advertising_available_tree_manage" model="ir.ui.view" >
			<field name="name">sale.advertising.available.tree.manage</field>
			<field name="type">tree</field>
			<field name="model">sale.advertising.available</field>
            <field name="inherit_id" ref="sale_advertising_order.sale_advertising_available_tree"/>
            <field name="groups_id" eval="[(4, ref('sale_advertising_order.group_ads_traffic_user'))]"/>
			<field name="arch" type="xml">
                <tree name="page_available" position="attributes" >
                    <attribute name="create" >1</attribute>
                    <attribute name="delete" >1</attribute>
                </tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_sale_advertising_available">
			<field name="name">Advertising Page Availability</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">sale.advertising.available</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="sale_advertising_available_tree"/>
		</record>

        <record id="view_advertising_available_filter" model="ir.ui.view">
            <field name="name">sale.advertising.available.filter</field>
            <field name="model">sale.advertising.available</field>
            <field name="arch" type="xml">
                <search string="Search Advertising Availability">
                    <filter name="opboekingen" string="Opboekingen" domain="[('available_qty','&gt;=', 0)]"/>
                    <filter name="afboekingen" string="Afboekingen" domain="[('available_qty','&lt;', 0)]"/>
                    <separator/>
                    <field name="name"/>
                    <field name="adv_issue_id" />
                    <field name="page_id"/>
                    <group expand="0" string="Group By">
                        <filter name="issues" string="Issues" domain="[]" context="{'group_by':'adv_issue_id'}"/>
                        <filter name="page" string="Page" domain="[]" context="{'group_by':'page_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- Discount.reason
        -->
		<record id="discount_reason_tree" model="ir.ui.view" >
			<field name="name">discount.reason.tree</field>
			<field name="type">tree</field>
			<field name="model">discount.reason</field>
			<field name="arch" type="xml">
				<tree string="Discount Reasons" editable="top">
						<field name="name" string="Discount Reason"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_discount_reason">
			<field name="name">Discount Reasons</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">discount.reason</field>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="discount_reason_tree"/>
		</record>

        <!-- FIXME: Is these necessary?? [START]       -->
        <record id="sale.action_quotations_with_onboarding" model="ir.actions.act_window">
            <field name="domain">[('state','in',('draft','sent','cancel')),('advertising','=',False)]</field>
        </record>

        <record id="sale.action_orders" model="ir.actions.act_window">
            <field name="domain">[('state','not in',('draft','sent','cancel')), ('advertising','=',False)]</field>
        </record>

        <record id="sale.action_orders_salesteams" model="ir.actions.act_window">
            <field name="domain">[('state','not in',('draft','sent','cancel')), ('advertising','=',False)]</field>
        </record>

        <record id="sale.action_orders_to_invoice_salesteams" model="ir.actions.act_window">
            <field name="domain">[('state', '=', 'sale'),('invoice_status','=','to invoice'), ('advertising','=',False)]</field>
        </record>

        <record id="sale_crm.sale_action_quotations_new" model="ir.actions.act_window">
            <field name="domain">[('opportunity_id', '=', active_id), ('advertising','=',False)]</field>
        </record>
        <!-- FIXME: Is these necessary?? [END]       -->

        <!--
                Sale Analysis Report
        -->
        <record model="ir.ui.view" id="view_sale_order_graph2">
            <field name="name">sale.order.graph</field>
            <field name="model">sale.order</field>
            <field name="arch" type="xml">
                <graph string="Sales Orders">
                    <field name="partner_id" type="row"/>
                    <field name="date_order" type="col"/>
                    <field name="amount_untaxed" type="measure"/>
                </graph>
            </field>
        </record>
        <record model="ir.ui.view" id="view_sale_order_pivot2">
            <field name="name">sale.order.pivot</field>
            <field name="model">sale.order</field>
            <field name="arch" type="xml">
                <pivot string="Sales Orders">
                    <field name="partner_id" type="row"/>
                    <field name="date_order" type="col"/>
                    <field name="amount_untaxed" type="measure"/>
                </pivot>
            </field>
        </record>

        <record id="action_sale_order_report_all" model="ir.actions.act_window">
            <field name="name">Sales Analysis</field>
            <field name="res_model">sale.order</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="view_mode">pivot,graph</field>
            <field name="view_ids"
               eval="[(5, 0, 0), (0, 0, {'view_mode': 'pivot', 'view_id': ref('sale_advertising_order.view_sale_order_pivot2')}),
                      (0, 0, {'view_mode': 'graph', 'view_id': ref('sale_advertising_order.view_sale_order_graph2')})]"/>
            <field name="domain"
                   eval="[('type_id','=', ref('sale_advertising_order.ads_sale_type')), ('advertising','=',True)]"
            />
            <field name="context"
                eval="{'default_type_id': ref('sale_advertising_order.ads_sale_type'), 'search_default_sales':1, 'search_default_my_sale_orders_filter':1}"
            />
            <field name="search_view_id" ref="sale_advertising_order.advertising_order_view_search_inherit_sale"/>
            <field name="help">From this report, you can have an overview of the sale confirmed with your customers. The search tool can also be used to personalise your Sales reports and so, match this analysis to your needs.</field>
        </record>


        <!--
                Advertising Schedule (a.k.a Indeellijst)
                ported from nsm_sale_advertising_module
        -->
        <record id="view_indeellijst_list_tree" model="ir.ui.view">
            <field name="name">sale.order.line.indeellijst.tree</field>
            <field name="model">sale.order.line</field>
            <field name="arch" type="xml">
                <tree string="Schedules" create="false" edit="false" delete="false">
                        <field name="order_id" widget="many2one_clickable"/>
                        <field name="id" optional="hide"/>
                        <field name="order_advertiser_id" />
                        <field name="adv_issue" />
                        <field name="issue_date"/>
                        <field name="from_date" />
                        <field name="to_date" />
                        <field name="ad_class"/>
                        <field name="product_template_id"/>
                        <field name="product_uom_qty" />
                        <field name="product_width"/>
                        <field name="product_height"/>
                        <field name="page_reference"/>
                        <field name="layout_remark" optional="hide"/>
                        <field name="name" />
                        <field name="analytic_tag_ids" optional="hide"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="ads_indeellijst_action">
			<field name="name">Advertising Schedules</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">sale.order.line</field>
			<field name="view_mode">tree,form,pivot</field>
            <field name="search_view_id" ref="sale_advertising_order.view_advertising_sales_order_line_filter"/>
            <field name="domain"
                   eval="[('order_id.type_id','=', ref('sale_advertising_order.ads_sale_type')), ('advertising','=',True),('state','in',('sale','done'))]"
            />
		</record>

         <record id="ads_indeellijst_action_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_indeellijst_list_tree"/>
            <field name="act_window_id" ref="ads_indeellijst_action"/>
        </record>

	</data>
</odoo>
